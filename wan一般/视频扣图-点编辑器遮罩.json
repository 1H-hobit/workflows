{"id":"4c05ca08-177b-4f97-91ae-06f1c0254227","revision":0,"last_node_id":22,"last_link_id":44,"nodes":[{"id":18,"type":"PreviewImage","pos":[2765.052001953125,3366.693603515625],"size":[140,246],"flags":{},"order":4,"mode":0,"inputs":[{"label":"图像","localized_name":"图像","name":"images","type":"IMAGE","link":38}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":12,"type":"PointsEditor","pos":[3222.897216796875,2813.26220703125],"size":[909,780],"flags":{"collapsed":false},"order":5,"mode":0,"inputs":[{"label":"背景图","localized_name":"bg_image","name":"bg_image","shape":7,"type":"IMAGE","link":null},{"localized_name":"点位置","name":"points_store","type":"STRING","widget":{"name":"points_store"},"link":null},{"localized_name":"coordinates","name":"coordinates","type":"STRING","widget":{"name":"coordinates"},"link":null},{"localized_name":"neg_coordinates","name":"neg_coordinates","type":"STRING","widget":{"name":"neg_coordinates"},"link":null},{"localized_name":"BBox位置","name":"bbox_store","type":"STRING","widget":{"name":"bbox_store"},"link":null},{"localized_name":"bboxes","name":"bboxes","type":"STRING","widget":{"name":"bboxes"},"link":null},{"localized_name":"BBox格式","name":"bbox_format","type":"COMBO","widget":{"name":"bbox_format"},"link":null},{"localized_name":"宽度","name":"width","type":"INT","widget":{"name":"width"},"link":36},{"localized_name":"高度","name":"height","type":"INT","widget":{"name":"height"},"link":37},{"localized_name":"规格化","name":"normalize","type":"BOOLEAN","widget":{"name":"normalize"},"link":null}],"outputs":[{"label":"正面坐标","localized_name":"positive_coords","name":"positive_coords","type":"STRING","links":[10]},{"label":"负面坐标","localized_name":"negative_coords","name":"negative_coords","type":"STRING","links":[11]},{"label":"BBox","localized_name":"bbox","name":"bbox","type":"BBOX","links":[]},{"label":"BBox遮罩","localized_name":"bbox_mask","name":"bbox_mask","type":"MASK","links":[]},{"label":"裁剪图像","localized_name":"cropped_image","name":"cropped_image","type":"IMAGE","links":[]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"44565e9bffc89de454d06b4abe08137d1247652a","Node name for S&R":"PointsEditor","widget_ue_connectable":{},"neg_points":"PointsEditor","imgData":null,"points":"PointsEditor"},"widgets_values":["{\"positive\":[{\"x\":48.645639839175495,\"y\":48.95948267684759},{\"x\":133.69704884831458,\"y\":47.70411132615919},{\"x\":93.08095875964945,\"y\":45.88497967024973}],\"negative\":[{\"x\":157.31993029799906,\"y\":138.96593842989918},{\"x\":412.7037991163365,\"y\":142.82112379920952},{\"x\":661.9020358142676,\"y\":146.76101686953254}]}","[{\"x\":48.645639839175495,\"y\":48.95948267684759},{\"x\":133.69704884831458,\"y\":47.70411132615919},{\"x\":93.08095875964945,\"y\":45.88497967024973}]","[{\"x\":157.31993029799906,\"y\":138.96593842989918},{\"x\":412.7037991163365,\"y\":142.82112379920952},{\"x\":661.9020358142676,\"y\":146.76101686953254}]","[{\"startX\":31.100492013982176,\"startY\":24.88039361118574,\"endX\":150.31904473424717,\"endY\":64.27435016222982}]","[{\"startX\":31.100492013982176,\"startY\":24.88039361118574,\"endX\":150.31904473424717,\"endY\":64.27435016222982}]","xyxy",864,480,false,"",""]},{"id":2,"type":"MaskToImage","pos":[3835.948974609375,2395.612060546875],"size":[264.5999755859375,26],"flags":{},"order":9,"mode":0,"inputs":[{"label":"遮罩","localized_name":"遮罩","name":"mask","type":"MASK","link":2}],"outputs":[{"label":"图像","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[33,42]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"MaskToImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":20,"type":"Image Blank","pos":[3856.482421875,2116.06591796875],"size":[313.2091369628906,154],"flags":{},"order":6,"mode":0,"inputs":[{"label":"宽度","localized_name":"宽度","name":"width","type":"INT","widget":{"name":"width"},"link":40},{"label":"高度","localized_name":"高度","name":"height","type":"INT","widget":{"name":"height"},"link":41},{"localized_name":"红色","name":"red","type":"INT","widget":{"name":"red"},"link":null},{"localized_name":"绿色","name":"green","type":"INT","widget":{"name":"green"},"link":null},{"localized_name":"蓝色","name":"blue","type":"INT","widget":{"name":"blue"},"link":null}],"outputs":[{"label":"图像","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[39]}],"properties":{"cnr_id":"was-node-suite-comfyui","ver":"3ed45af34a14551dc28cb3127235cc7197d4633f","Node name for S&R":"Image Blank","widget_ue_connectable":{"width":true,"height":true,"red":true,"green":true,"blue":true},"enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"ue_properties":{"version":"7.0.1","widget_ue_connectable":{"width":true,"height":true}}},"widgets_values":[512,512,0,0,0]},{"id":19,"type":"Mix Color By Mask","pos":[4289.86279296875,2152.627685546875],"size":[315,126],"flags":{},"order":12,"mode":0,"inputs":[{"label":"图像","localized_name":"image","name":"image","type":"IMAGE","link":39},{"label":"遮罩","localized_name":"mask","name":"mask","type":"IMAGE","link":42},{"localized_name":"R","name":"r","type":"INT","widget":{"name":"r"},"link":null},{"localized_name":"G","name":"g","type":"INT","widget":{"name":"g"},"link":null},{"localized_name":"B","name":"b","type":"INT","widget":{"name":"b"},"link":null}],"outputs":[{"label":"图像","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[43]}],"properties":{"cnr_id":"masquerade-nodes-comfyui","ver":"432cb4d146a391b387a0cd25ace824328b5b61cf","Node name for S&R":"Mix Color By Mask","widget_ue_connectable":{}},"widgets_values":[255,255,255]},{"id":21,"type":"PreviewImage","pos":[4760.75146484375,2191.790283203125],"size":[140,246],"flags":{},"order":14,"mode":0,"inputs":[{"label":"图像","localized_name":"图像","name":"images","type":"IMAGE","link":43}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":16,"type":"Mix Color By Mask","pos":[4226.74072265625,2541.720703125],"size":[315,126],"flags":{},"order":11,"mode":0,"inputs":[{"label":"图像","localized_name":"image","name":"image","type":"IMAGE","link":34},{"label":"遮罩","localized_name":"mask","name":"mask","type":"IMAGE","link":33},{"localized_name":"R","name":"r","type":"INT","widget":{"name":"r"},"link":null},{"localized_name":"G","name":"g","type":"INT","widget":{"name":"g"},"link":null},{"localized_name":"B","name":"b","type":"INT","widget":{"name":"b"},"link":null}],"outputs":[{"label":"图像","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[35]}],"properties":{"cnr_id":"masquerade-nodes-comfyui","ver":"432cb4d146a391b387a0cd25ace824328b5b61cf","Node name for S&R":"Mix Color By Mask","widget_ue_connectable":{}},"widgets_values":[255,255,255]},{"id":7,"type":"Sam2Segmentation","pos":[3065.024169921875,2388.1875],"size":[315,190],"flags":{},"order":7,"mode":0,"inputs":[{"label":"SAM2","localized_name":"sam2_model","name":"sam2_model","type":"SAM2MODEL","link":8},{"label":"图像","localized_name":"image","name":"image","type":"IMAGE","link":9},{"label":"正面坐标","localized_name":"coordinates_positive","name":"coordinates_positive","shape":7,"type":"STRING","link":10},{"label":"负面坐标","localized_name":"coordinates_negative","name":"coordinates_negative","shape":7,"type":"STRING","link":11},{"label":"BBox","localized_name":"bboxes","name":"bboxes","shape":7,"type":"BBOX","link":null},{"label":"遮罩","localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"保持模型加载","name":"keep_model_loaded","type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"localized_name":"孤岛物体","name":"individual_objects","shape":7,"type":"BOOLEAN","widget":{"name":"individual_objects"},"link":null}],"outputs":[{"label":"遮罩","localized_name":"mask","name":"mask","type":"MASK","links":[14]}],"properties":{"cnr_id":"segment-anything-2","ver":"059815ecc55b17ae9b47d15ed9b39b243d73b25f","Node name for S&R":"Sam2Segmentation","widget_ue_connectable":{}},"widgets_values":[true,true]},{"id":3,"type":"Reroute","pos":[2917.929931640625,2613.27734375],"size":[75,26],"flags":{},"order":3,"mode":0,"inputs":[{"label":"","name":"","type":"*","link":29}],"outputs":[{"name":"","type":"IMAGE","links":[9,34]}],"properties":{"showOutputText":false,"horizontal":false,"widget_ue_connectable":{}}},{"id":8,"type":"DownloadAndLoadSAM2Model","pos":[2568.877197265625,2398.192626953125],"size":[315,130],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"模型","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"分割框架","name":"segmentor","type":"COMBO","widget":{"name":"segmentor"},"link":null},{"localized_name":"设备","name":"device","type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"精度","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null}],"outputs":[{"label":"SAM2","localized_name":"sam2_model","name":"sam2_model","type":"SAM2MODEL","links":[8]}],"properties":{"cnr_id":"ComfyUI-segment-anything-2","ver":"c59676b008a76237002926f684d0ca3a9b29ac54","Node name for S&R":"DownloadAndLoadSAM2Model","widget_ue_connectable":{}},"widgets_values":["sam2_hiera_base_plus.safetensors","video","cuda","fp16"]},{"id":17,"type":"PreviewImage","pos":[4748.26318359375,2553.40234375],"size":[140,246],"flags":{},"order":13,"mode":0,"inputs":[{"label":"图像","localized_name":"图像","name":"images","type":"IMAGE","link":35}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.56","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[]},{"id":10,"type":"GrowMaskWithBlur","pos":[3453.368896484375,2363.19775390625],"size":[303.86700439453125,246],"flags":{},"order":8,"mode":0,"inputs":[{"label":"遮罩","localized_name":"mask","name":"mask","type":"MASK","link":14},{"localized_name":"扩展","name":"expand","type":"INT","widget":{"name":"expand"},"link":null},{"localized_name":"扩展增量","name":"incremental_expandrate","type":"FLOAT","widget":{"name":"incremental_expandrate"},"link":null},{"localized_name":"倒角","name":"tapered_corners","type":"BOOLEAN","widget":{"name":"tapered_corners"},"link":null},{"localized_name":"反转输入","name":"flip_input","type":"BOOLEAN","widget":{"name":"flip_input"},"link":null},{"localized_name":"模糊半径","name":"blur_radius","type":"FLOAT","widget":{"name":"blur_radius"},"link":null},{"localized_name":"线性透明","name":"lerp_alpha","type":"FLOAT","widget":{"name":"lerp_alpha"},"link":null},{"localized_name":"腐蚀系数","name":"decay_factor","type":"FLOAT","widget":{"name":"decay_factor"},"link":null},{"localized_name":"fill_holes","name":"fill_holes","shape":7,"type":"BOOLEAN","widget":{"name":"fill_holes"},"link":null}],"outputs":[{"label":"遮罩","localized_name":"mask","name":"mask","type":"MASK","links":[2,44]},{"label":"反转遮罩","localized_name":"mask_inverted","name":"mask_inverted","type":"MASK"}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"44565e9bffc89de454d06b4abe08137d1247652a","Node name for S&R":"GrowMaskWithBlur","widget_ue_connectable":{}},"widgets_values":[26,0,true,false,1,1,1,true]},{"id":22,"type":"MaskPreview+","pos":[4486.09033203125,2990.262939453125],"size":[140,246],"flags":{},"order":10,"mode":0,"inputs":[{"label":"遮罩","localized_name":"mask","name":"mask","type":"MASK","link":44}],"outputs":[],"properties":{"cnr_id":"comfyui_essentials","ver":"9d9f4bedfc9f0321c19faf71855e228c93bd0dc9","Node name for S&R":"MaskPreview+","widget_ue_connectable":{}},"widgets_values":[]},{"id":15,"type":"LayerUtility: ImageScaleByAspectRatio V2","pos":[2715.27587890625,2776.681396484375],"size":[270,330],"flags":{},"order":2,"mode":0,"inputs":[{"label":"图像","localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":22},{"label":"遮罩","localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"宽高比","name":"aspect_ratio","type":"COMBO","widget":{"name":"aspect_ratio"},"link":null},{"localized_name":"比例宽","name":"proportional_width","type":"INT","widget":{"name":"proportional_width"},"link":null},{"localized_name":"比例高","name":"proportional_height","type":"INT","widget":{"name":"proportional_height"},"link":null},{"localized_name":"缩放模式","name":"fit","type":"COMBO","widget":{"name":"fit"},"link":null},{"localized_name":"采样方法","name":"method","type":"COMBO","widget":{"name":"method"},"link":null},{"localized_name":"倍数取整","name":"round_to_multiple","type":"COMBO","widget":{"name":"round_to_multiple"},"link":null},{"localized_name":"缩放到边","name":"scale_to_side","type":"COMBO","widget":{"name":"scale_to_side"},"link":null},{"localized_name":"缩放到长度","name":"scale_to_length","type":"INT","widget":{"name":"scale_to_length"},"link":null},{"localized_name":"background_color","name":"background_color","type":"STRING","widget":{"name":"background_color"},"link":null}],"outputs":[{"label":"图像","localized_name":"image","name":"image","type":"IMAGE","links":[29,38]},{"label":"遮罩","localized_name":"mask","name":"mask","type":"MASK","links":null},{"label":"原始大小","localized_name":"original_size","name":"original_size","type":"BOX","links":null},{"localized_name":"width","name":"width","type":"INT","links":[36,40]},{"localized_name":"height","name":"height","type":"INT","links":[37,41]}],"properties":{"cnr_id":"comfyui_layerstyle","ver":"1.0.89","Node name for S&R":"LayerUtility: ImageScaleByAspectRatio V2","widget_ue_connectable":{}},"widgets_values":["original",1,1,"letterbox","lanczos","16","height",480,"#000000"],"color":"rgba(38, 73, 116, 0.7)"},{"id":4,"type":"VHS_LoadVideo","pos":[1636.364990234375,2445.2587890625],"size":[253.279296875,455.2196044921875],"flags":{},"order":1,"mode":0,"inputs":[{"label":"批次管理","localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"视频","name":"video","type":"COMBO","widget":{"name":"video"},"link":null},{"localized_name":"强制帧率","name":"force_rate","type":"FLOAT","widget":{"name":"force_rate"},"link":null},{"localized_name":"custom_width","name":"custom_width","type":"INT","widget":{"name":"custom_width"},"link":null},{"localized_name":"custom_height","name":"custom_height","type":"INT","widget":{"name":"custom_height"},"link":null},{"localized_name":"帧数读取上限","name":"frame_load_cap","type":"INT","widget":{"name":"frame_load_cap"},"link":null},{"localized_name":"跳过前X帧","name":"skip_first_frames","type":"INT","widget":{"name":"skip_first_frames"},"link":null},{"localized_name":"模选","name":"select_every_nth","type":"INT","widget":{"name":"select_every_nth"},"link":null},{"localized_name":"format","name":"format","shape":7,"type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"label":"图像","localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[22]},{"label":"帧计数","localized_name":"frame_count","name":"frame_count","type":"INT","links":null},{"label":"音频","localized_name":"audio","name":"audio","type":"AUDIO","links":null},{"label":"视频信息","localized_name":"video_info","name":"video_info","type":"VHS_VIDEOINFO","links":[]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"0a75c7958fe320efcb052f1d9f8451fd20c730a8","Node name for S&R":"VHS_LoadVideo","widget_ue_connectable":{"frame_load_cap":true}},"widgets_values":{"video":"2025-9-9-绒球仙女灯-30s (1).mp4","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":0,"skip_first_frames":0,"select_every_nth":2,"format":"Wan","choose video to upload":"image","videopreview":{"hidden":false,"paused":false,"params":{"filename":"2025-9-9-绒球仙女灯-30s (1).mp4","type":"input","format":"video/mp4","force_rate":0,"custom_width":0,"custom_height":0,"frame_load_cap":0,"skip_first_frames":0,"select_every_nth":2}}}}],"links":[[2,10,0,2,0,"MASK"],[8,8,0,7,0,"SAM2MODEL"],[9,3,0,7,1,"IMAGE"],[10,12,0,7,2,"STRING"],[11,12,1,7,3,"STRING"],[14,7,0,10,0,"MASK"],[22,4,0,15,0,"IMAGE"],[29,15,0,3,0,"*"],[33,2,0,16,1,"IMAGE"],[34,3,0,16,0,"IMAGE"],[35,16,0,17,0,"IMAGE"],[36,15,3,12,7,"INT"],[37,15,4,12,8,"INT"],[38,15,0,18,0,"IMAGE"],[39,20,0,19,0,"IMAGE"],[40,15,3,20,0,"INT"],[41,15,4,20,1,"INT"],[42,2,0,19,1,"IMAGE"],[43,19,0,21,0,"IMAGE"],[44,10,0,22,0,"MASK"]],"groups":[{"id":1,"title":"Group","bounding":[2292.5400390625,1888.879150390625,2912.2841796875,2318.189208984375],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ue_links":[],"ds":{"scale":0.45,"offset":[38.1649745730997,-1839.5352475183051]},"links_added_by_ue":[]},"version":0.4}